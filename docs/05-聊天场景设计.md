# èŠå¤©åœºæ™¯ä¸åä½œæ¨¡å¼è®¾è®¡æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.0
> **æ—¥æœŸ**: 2026-02-23
> **çŠ¶æ€**: è®¾è®¡é˜¶æ®µ
> **ä½œè€…**: AIæ´»åŠ¨ç§€æŠ€æœ¯å›¢é˜Ÿ

---

## ç›®å½•

1. [æ¦‚è¿°](#1-æ¦‚è¿°)
2. [åœºæ™¯ç±»å‹å®šä¹‰](#2-åœºæ™¯ç±»å‹å®šä¹‰)
3. [åœºæ™¯é…ç½®](#3-åœºæ™¯é…ç½®)
4. [AIåˆ†èº«é‚€è¯·æœºåˆ¶](#4-aiåˆ†èº«é‚€è¯·æœºåˆ¶)
5. [å¤šAIåä½œæ¨¡å¼](#5-å¤šaiåä½œæ¨¡å¼)
6. [åœºæ™¯ç‰¹å®šåŠŸèƒ½](#6-åœºæ™¯ç‰¹å®šåŠŸèƒ½)
7. [APIæ¥å£è®¾è®¡](#7-apiæ¥å£è®¾è®¡)
8. [æ•°æ®åº“è®¾è®¡](#8-æ•°æ®åº“è®¾è®¡)
9. [å®ç°è·¯çº¿å›¾](#9-å®ç°è·¯çº¿å›¾)

---

## 1. æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

æœ¬æ–‡æ¡£å®šä¹‰AIæ´»åŠ¨ç§€å¹³å°çš„èŠå¤©åœºæ™¯ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§åä½œåœºæ™¯ï¼Œå…è®¸AIåˆ†èº«å‚ä¸ç¾¤èŠåä½œï¼Œå®ç°äººæœºæ··åˆçš„é«˜æ•ˆæ²Ÿé€šæ¨¡å¼ã€‚

### 1.2 æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **èŠå¤©åœºæ™¯** | å®šä¹‰èŠå¤©å®¤çš„è¡Œä¸ºæ¨¡å¼ã€åŠŸèƒ½é›†åˆå’Œåä½œç­–ç•¥ |
| **AIåˆ†èº«** | ç”¨æˆ·åˆ›å»ºçš„AIä»£ç†ï¼Œå…·æœ‰ç‰¹å®šæŠ€èƒ½å’Œäººæ ¼ç‰¹å¾ |
| **åä½œæ¨¡å¼** | å¤šä¸ªAIåˆ†èº«ä¹‹é—´çš„ä»»åŠ¡åˆ†é…å’Œé€šä¿¡æœºåˆ¶ |
| **åœºæ™¯æ¨¡æ¿** | é¢„å®šä¹‰çš„åœºæ™¯é…ç½®ï¼Œå¯å¿«é€Ÿåˆ›å»ºç‰¹å®šç±»å‹çš„èŠå¤©å®¤ |

### 1.3 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      èŠå¤©åœºæ™¯ç³»ç»Ÿ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åœºæ™¯ç®¡ç†    â”‚  AIåˆ†èº«ç®¡ç†  â”‚  åä½œå¼•æ“    â”‚    åœºæ™¯åŠŸèƒ½æ¨¡å—    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - åœºæ™¯åˆ›å»º   â”‚ - åˆ†èº«é‚€è¯·   â”‚ - ä»»åŠ¡åˆ†é…   â”‚ - é¡¹ç›®çœ‹æ¿        â”‚
â”‚ - åœºæ™¯åˆ‡æ¢   â”‚ - æƒé™æ§åˆ¶   â”‚ - ç»“æœæ±‡æ€»   â”‚ - ä¼šè®®çºªè¦        â”‚
â”‚ - æ¨¡æ¿ç®¡ç†   â”‚ - èº«ä»½æ ‡è¯†   â”‚ - AIé—´é€šä¿¡   â”‚ - å­¦ä¹ è¿›åº¦        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. åœºæ™¯ç±»å‹å®šä¹‰

### 2.1 åœºæ™¯ç±»å‹æ€»è§ˆ

| åœºæ™¯ç±»å‹ | æ ‡è¯†ç¬¦ | ä¸»è¦ç”¨é€” | æ”¯æŒAIæ•° | æ ¸å¿ƒåŠŸèƒ½ |
|----------|--------|----------|----------|----------|
| é—²èŠåœºæ™¯ | `casual` | æ—¥å¸¸äº¤æµ | 1-3 | è½»æ¾æ°›å›´ã€è¡¨æƒ…åŒ… |
| é¡¹ç›®åœºæ™¯ | `project` | é¡¹ç›®åä½œ | 2-5 | çœ‹æ¿ã€ä»»åŠ¡åˆ†é… |
| ä¼šè®®åœºæ™¯ | `meeting` | ä¼šè®®è®¨è®º | 1-2 | çºªè¦ç”Ÿæˆã€è®®ç¨‹ |
| å­¦ä¹ åœºæ™¯ | `learning` | çŸ¥è¯†å­¦ä¹  | 1-3 | è¿›åº¦è·Ÿè¸ªã€æµ‹éªŒ |

### 2.2 é—²èŠåœºæ™¯ (Casual)

**åœºæ™¯ç‰¹å¾**
- è½»æ¾éšæ„çš„äº¤æµæ°›å›´
- æ”¯æŒè¡¨æƒ…åŒ…å’Œå¯Œåª’ä½“
- AIåˆ†èº«æ‰®æ¼”é™ªä¼´è§’è‰²
- æ— ä¸¥æ ¼ä»»åŠ¡å¯¼å‘

**AIè¡Œä¸ºç­–ç•¥**
```yaml
ai_strategy:
  response_style: casual_friendly
  initiative_level: medium      # ä¸­ç­‰ä¸»åŠ¨æ€§
  humor_enabled: true
  emoji_usage: frequent
  topic_range: open             # å¼€æ”¾è¯é¢˜
  interruption_allowed: true
```

**åŠŸèƒ½ç‰¹æ€§**
- è¡¨æƒ…åŒ…æ¨èå’Œå‘é€
- è¯é¢˜å¼•å¯¼å’Œå»¶ç»­
- æƒ…ç»ªè¯†åˆ«å’Œå›åº”
- ç¾¤èŠæ¸¸æˆï¼ˆå¯é€‰ï¼‰

### 2.3 é¡¹ç›®åœºæ™¯ (Project)

**åœºæ™¯ç‰¹å¾**
- ç›®æ ‡é©±åŠ¨çš„åä½œç¯å¢ƒ
- ä»»åŠ¡åˆ†é…å’Œè¿›åº¦è·Ÿè¸ª
- å¤šAIååŒå·¥ä½œ
- ç»“æ„åŒ–ä¿¡æ¯æµè½¬

**AIè¡Œä¸ºç­–ç•¥**
```yaml
ai_strategy:
  response_style: professional
  initiative_level: high        # é«˜ä¸»åŠ¨æ€§
  task_oriented: true
  collaboration_mode: multi_ai  # å¤šAIåä½œ
  decision_support: true
  progress_tracking: true
```

**åŠŸèƒ½ç‰¹æ€§**
- é¡¹ç›®çœ‹æ¿ï¼ˆKanbanï¼‰
- ä»»åŠ¡åˆ›å»ºå’Œåˆ†é…
- è¿›åº¦è‡ªåŠ¨æ±‡æ€»
- AIé—´ä»»åŠ¡åè°ƒ
- æ–‡æ¡£åä½œç¼–è¾‘

**AIè§’è‰²å®šä¹‰**
| è§’è‰² | èŒè´£ | æŠ€èƒ½è¦æ±‚ |
|------|------|----------|
| é¡¹ç›®ç»ç† | ä»»åŠ¡åˆ†é…ã€è¿›åº¦è·Ÿè¸ª | é¡¹ç›®ç®¡ç†ã€æ—¶é—´ç®¡ç† |
| æŠ€æœ¯ä¸“å®¶ | æŠ€æœ¯æ–¹æ¡ˆã€ä»£ç å®¡æŸ¥ | ç¼–ç¨‹ã€æ¶æ„è®¾è®¡ |
| æ–‡æ¡£åŠ©æ‰‹ | æ–‡æ¡£æ•´ç†ã€çºªè¦ç”Ÿæˆ | å†™ä½œã€ä¿¡æ¯æ•´ç† |
| æµ‹è¯•åŠ©æ‰‹ | æµ‹è¯•ç”¨ä¾‹ã€Bugè·Ÿè¸ª | æµ‹è¯•è®¾è®¡ã€è´¨é‡ä¿è¯ |

### 2.4 ä¼šè®®åœºæ™¯ (Meeting)

**åœºæ™¯ç‰¹å¾**
- è®®ç¨‹é©±åŠ¨çš„è®¨è®º
- å®æ—¶çºªè¦ç”Ÿæˆ
- å†³ç­–è®°å½•å’Œè¿½è¸ª
- æ—¶é—´ç®¡ç†å’Œæé†’

**AIè¡Œä¸ºç­–ç•¥**
```yaml
ai_strategy:
  response_style: concise
  initiative_level: low         # ä½ä¸»åŠ¨æ€§ï¼ˆä»¥äººä¸ºä¸»ï¼‰
  note_taking: true
  agenda_tracking: true
  time_reminder: true
  action_item_extraction: true
```

**åŠŸèƒ½ç‰¹æ€§**
- è®®ç¨‹ç®¡ç†
- å®æ—¶ä¼šè®®çºªè¦
- è¡ŒåŠ¨é¡¹æå–
- å†³ç­–è®°å½•
- ä¼šè®®è®¡æ—¶å’Œæé†’

### 2.5 å­¦ä¹ åœºæ™¯ (Learning)

**åœºæ™¯ç‰¹å¾**
- çŸ¥è¯†ä¼ æˆå’Œç­”ç–‘
- å­¦ä¹ è¿›åº¦è·Ÿè¸ª
- ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
- äº’åŠ¨å¼æµ‹éªŒ

**AIè¡Œä¸ºç­–ç•¥**
```yaml
ai_strategy:
  response_style: educational
  initiative_level: adaptive    # è‡ªé€‚åº”
  patience_level: high
  explanation_depth: adjustable
  quiz_generation: true
  progress_assessment: true
```

**åŠŸèƒ½ç‰¹æ€§**
- å­¦ä¹ è®¡åˆ’åˆ¶å®š
- çŸ¥è¯†ç‚¹è®²è§£
- äº’åŠ¨é—®ç­”
- æµ‹éªŒç”Ÿæˆ
- å­¦ä¹ è¿›åº¦å¯è§†åŒ–

---

## 3. åœºæ™¯é…ç½®

### 3.1 åœºæ™¯æ•°æ®ç»“æ„

```typescript
interface ChatScene {
  id: string;
  type: SceneType;           // casual | project | meeting | learning
  name: string;
  description: string;
  config: SceneConfig;
  ai_agents: AIAgent[];      // å…³è”çš„AIåˆ†èº«
  created_by: string;        // åˆ›å»ºè€…ç”¨æˆ·ID
  created_at: Date;
  updated_at: Date;
}

interface SceneConfig {
  // åŸºç¡€é…ç½®
  max_members: number;       // æœ€å¤§æˆå‘˜æ•°
  max_ai_agents: number;     // æœ€å¤§AIåˆ†èº«æ•°

  // åŠŸèƒ½å¼€å…³
  features: {
    kanban: boolean;         // çœ‹æ¿åŠŸèƒ½
    task_management: boolean; // ä»»åŠ¡ç®¡ç†
    note_taking: boolean;    // çºªè¦åŠŸèƒ½
    file_sharing: boolean;   // æ–‡ä»¶åˆ†äº«
    voice_chat: boolean;     // è¯­éŸ³èŠå¤©
  };

  // AIè¡Œä¸ºé…ç½®
  ai_behavior: {
    auto_response: boolean;  // è‡ªåŠ¨å“åº”
    response_delay: number;  // å“åº”å»¶è¿Ÿ(ms)
    collaboration_mode: CollaborationMode;
  };

  // åœºæ™¯ç‰¹å®šé…ç½®
  custom_settings: Record<string, any>;
}
```

### 3.2 åœºæ™¯åˆ‡æ¢æœºåˆ¶

**åˆ‡æ¢æµç¨‹**
```
ç”¨æˆ·å‘èµ·åˆ‡æ¢
    â†“
éªŒè¯æƒé™ï¼ˆä»…åˆ›å»ºè€…/ç®¡ç†å‘˜ï¼‰
    â†“
ä¿å­˜å½“å‰åœºæ™¯çŠ¶æ€
    â†“
åŠ è½½æ–°åœºæ™¯é…ç½®
    â†“
é€šçŸ¥æ‰€æœ‰æˆå‘˜
    â†“
æ›´æ–°AIè¡Œä¸ºæ¨¡å¼
    â†“
åˆ‡æ¢å®Œæˆ
```

**åˆ‡æ¢é™åˆ¶**
- é¡¹ç›®åœºæ™¯æœ‰æœªå®Œæˆä»»åŠ¡æ—¶ï¼Œåˆ‡æ¢éœ€ç¡®è®¤
- ä¼šè®®åœºæ™¯è¿›è¡Œä¸­ç¦æ­¢åˆ‡æ¢
- å­¦ä¹ åœºæ™¯æœ‰è¿›è¡Œä¸­çš„æµ‹éªŒæ—¶ç¦æ­¢åˆ‡æ¢

**APIç«¯ç‚¹**
```http
POST /api/chat/rooms/{room_id}/switch-scene
Content-Type: application/json

{
  "scene_type": "project",
  "preserve_history": true,
  "custom_config": {
    "kanban_enabled": true
  }
}
```

### 3.3 åœºæ™¯æ¨¡æ¿

**é¢„å®šä¹‰æ¨¡æ¿**

| æ¨¡æ¿åç§° | ç±»å‹ | æè¿° | é»˜è®¤AIé…ç½® |
|----------|------|------|------------|
| æ—¥å¸¸é—²èŠ | casual | è½»æ¾éšæ„çš„èŠå¤©ç¯å¢ƒ | 1ä¸ªé€šç”¨AI |
| æ•æ·å¼€å‘ | project | Scrumé£æ ¼é¡¹ç›®ç®¡ç† | PM + æŠ€æœ¯ + æ–‡æ¡£ |
| å‘¨ä¼šçºªè¦ | meeting | è‡ªåŠ¨è®°å½•ä¼šè®®çºªè¦ | 1ä¸ªçºªè¦AI |
| ç¼–ç¨‹å­¦ä¹  | learning | ç¼–ç¨‹æŠ€èƒ½å­¦ä¹  | 1ä¸ªå¯¼å¸ˆAI |
| å¤´è„‘é£æš´ | project | åˆ›æ„å‘æ•£è®¨è®º | 2ä¸ªåˆ›æ„AI |

**æ¨¡æ¿å®šä¹‰ç¤ºä¾‹**
```yaml
# æ•æ·å¼€å‘æ¨¡æ¿
template:
  name: "æ•æ·å¼€å‘"
  type: "project"
  config:
    max_members: 10
    max_ai_agents: 3
    features:
      kanban: true
      task_management: true
      note_taking: false
      file_sharing: true
      voice_chat: true
    ai_behavior:
      auto_response: true
      response_delay: 500
      collaboration_mode: "coordinator"
  default_agents:
    - role: "project_manager"
      name: "é¡¹ç›®åŠ©æ‰‹"
      skills: ["project_management", "scrum"]
    - role: "tech_lead"
      name: "æŠ€æœ¯é¡¾é—®"
      skills: ["programming", "architecture"]
    - role: "documentarian"
      name: "æ–‡æ¡£åŠ©æ‰‹"
      skills: ["technical_writing"]
```

### 3.4 é»˜è®¤AIé…ç½®

**é…ç½®è§„åˆ™**
- æ¯ä¸ªåœºæ™¯ç±»å‹æœ‰é»˜è®¤AIè§’è‰²
- ç”¨æˆ·å¯è‡ªå®šä¹‰AIäººæ ¼
- AIæŠ€èƒ½éœ€ä¸åœºæ™¯åŒ¹é…

**é…ç½®æ¥å£**
```typescript
interface AIAgentConfig {
  agent_id: string;
  name: string;
  avatar: string;
  personality: string;       // äººæ ¼æè¿°
  skills: string[];          // æŠ€èƒ½åˆ—è¡¨
  response_style: string;    // å“åº”é£æ ¼
  proactive_level: number;   // ä¸»åŠ¨æ€§ 0-100
  knowledge_scope: string[]; // çŸ¥è¯†èŒƒå›´
}
```

---

## 4. AIåˆ†èº«é‚€è¯·æœºåˆ¶

### 4.1 é‚€è¯·æµç¨‹

**æµç¨‹å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·é€‰æ‹© â”‚ -> â”‚ æƒé™éªŒè¯ â”‚ -> â”‚ AIåŠ å…¥  â”‚ -> â”‚ æˆå‘˜é€šçŸ¥ â”‚
â”‚ AIåˆ†èº«  â”‚    â”‚         â”‚    â”‚         â”‚    â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    |
                    v
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ åœºæ™¯é€‚é… â”‚
               â”‚ æ£€æŸ¥    â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¯¦ç»†æ­¥éª¤**

1. **é€‰æ‹©AIåˆ†èº«**
   - ä»ç”¨æˆ·çš„AIåˆ†èº«åˆ—è¡¨é€‰æ‹©
   - æˆ–ä»å¸‚åœºé€‰æ‹©å…¬å…±AI
   - æ£€æŸ¥AIæŠ€èƒ½ä¸åœºæ™¯åŒ¹é…åº¦

2. **æƒé™éªŒè¯**
   - éªŒè¯ç”¨æˆ·æ‹¥æœ‰è¯¥AIä½¿ç”¨æƒ
   - éªŒè¯èŠå¤©å®¤å…è®¸AIåŠ å…¥
   - æ£€æŸ¥AIæ•°é‡é™åˆ¶

3. **åœºæ™¯é€‚é…æ£€æŸ¥**
   - æ£€æŸ¥AIæŠ€èƒ½æ˜¯å¦æ»¡è¶³åœºæ™¯éœ€æ±‚
   - æç¤ºæŠ€èƒ½ç¼ºå¤±ï¼ˆå¦‚æœ‰ï¼‰
   - ç¡®è®¤AIè§’è‰²å®šä½

4. **AIåŠ å…¥**
   - åˆ›å»ºAIåœ¨èŠå¤©å®¤çš„ä¼šè¯çŠ¶æ€
   - åŠ è½½åœºæ™¯ä¸Šä¸‹æ–‡
   - åˆå§‹åŒ–AIå·¥ä½œè®°å¿†

5. **æˆå‘˜é€šçŸ¥**
   - ç³»ç»Ÿæ¶ˆæ¯é€šçŸ¥AIåŠ å…¥
   - å±•ç¤ºAIèº«ä»½æ ‡è¯†
   - è¯´æ˜AIèŒè´£ï¼ˆé¡¹ç›®åœºæ™¯ï¼‰

### 4.2 æƒé™éªŒè¯

**æƒé™å±‚çº§**
```
ç³»ç»Ÿçº§æƒé™
â”œâ”€â”€ AIåˆ†èº«æ‰€æœ‰æƒéªŒè¯
â”œâ”€â”€ AIåˆ†èº«æ¿€æ´»çŠ¶æ€
â””â”€â”€ AIåˆ†èº«ä½¿ç”¨é™åˆ¶

èŠå¤©å®¤çº§æƒé™
â”œâ”€â”€ ç”¨æˆ·é‚€è¯·æƒé™
â”œâ”€â”€ AIæ•°é‡é™åˆ¶æ£€æŸ¥
â”œâ”€â”€ åœºæ™¯ç±»å‹å…¼å®¹æ€§
â””â”€â”€ é»‘åå•æ£€æŸ¥
```

**éªŒè¯æ¥å£**
```typescript
interface InvitationPermission {
  can_invite: boolean;
  reason?: string;
  max_ai_allowed: number;
  current_ai_count: number;
  skill_compatibility: {
    matched: string[];
    missing: string[];
    recommended: string[];
  };
}
```

**APIç«¯ç‚¹**
```http
# æ£€æŸ¥é‚€è¯·æƒé™
GET /api/chat/rooms/{room_id}/invite-ai-check?agent_id={agent_id}

# å“åº”
{
  "code": 200,
  "data": {
    "can_invite": true,
    "max_ai_allowed": 5,
    "current_ai_count": 2,
    "skill_compatibility": {
      "matched": ["project_management"],
      "missing": ["technical_writing"],
      "recommended": ["æ–‡æ¡£åŠ©æ‰‹"]
    }
  }
}
```

### 4.3 èº«ä»½å±•ç¤º

**å¼ºåˆ¶æ ‡è¯†è§„åˆ™**

æ‰€æœ‰AIåˆ†èº«å¿…é¡»åœ¨ç¾¤èŠä¸­æ˜ç¡®æ ‡è¯†AIèº«ä»½ï¼Œé¿å…è¯¯å¯¼ç”¨æˆ·ã€‚

**UIæ ‡è¯†è§„èŒƒ**

```css
/* AIåˆ†èº«æ ‡è¯†æ ·å¼ */
.ai-agent-badge {
  display: inline-flex;
  align-items: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

.ai-agent-badge::before {
  content: "ğŸ¤–";
  margin-right: 4px;
}
```

**èº«ä»½å±•ç¤ºå…ƒç´ **

| å…ƒç´  | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| AIæ ‡è¯† | å¤´åƒæ—æ˜¾ç¤ºAIå¾½ç«  | ğŸ¤– AI |
| åç§°åç¼€ | åç§°åæ ‡æ³¨AI | å°åŠ©æ‰‹ (AI) |
| è§’è‰²æ ‡ç­¾ | æ˜¾ç¤ºAIè§’è‰² | é¡¹ç›®ç»ç† |
| æŠ€èƒ½æ ‡ç­¾ | æ˜¾ç¤ºæ ¸å¿ƒæŠ€èƒ½ | ç¼–ç¨‹ã€å†™ä½œ |

**æ¶ˆæ¯æ ‡è¯†**
```typescript
interface AIMessage {
  id: string;
  sender: {
    id: string;
    name: string;
    is_ai: true;              // å¼ºåˆ¶æ ‡è¯†
    ai_badge: {
      type: 'ai_agent';
      role: string;           // AIè§’è‰²
      skills: string[];       // æŠ€èƒ½æ ‡ç­¾
    };
  };
  content: string;
  timestamp: Date;
}
```

**ç³»ç»Ÿæ¶ˆæ¯ç¤ºä¾‹**
```
[System] ğŸ¤– é¡¹ç›®åŠ©æ‰‹ (AI) å·²åŠ å…¥ç¾¤èŠ
è§’è‰²: é¡¹ç›®ç»ç†
æŠ€èƒ½: é¡¹ç›®ç®¡ç†ã€Scrumã€ä»»åŠ¡åˆ†é…
èŒè´£: ååŠ©ä»»åŠ¡ç®¡ç†å’Œè¿›åº¦è·Ÿè¸ª
```

---

## 5. å¤šAIåä½œæ¨¡å¼

### 5.1 AIé—´é€šä¿¡åè®®

**æ¶æ„è®¾è®¡**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AIåä½œåè°ƒå™¨                  â”‚
â”‚         (AI Collaboration Hub)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“         â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI-1  â”‚ â”‚ AI-2  â”‚ â”‚ AI-3  â”‚
â”‚(é¡¹ç›®ç»ç†)â”‚ â”‚(æŠ€æœ¯ä¸“å®¶)â”‚ â”‚(æ–‡æ¡£åŠ©æ‰‹)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€šä¿¡åè®®**
```typescript
interface AICommunication {
  // æ¶ˆæ¯ç±»å‹
  type: 'task_assign' | 'status_update' | 'result_share' | 'coordination';

  // å‘é€è€…
  from: string;           // AI Agent ID

  // æ¥æ”¶è€…
  to: string | 'broadcast'; // ç‰¹å®šAIæˆ–å¹¿æ’­

  // æ¶ˆæ¯å†…å®¹
  payload: {
    task_id?: string;
    task_type?: string;
    content: string;
    priority: 'low' | 'medium' | 'high';
    deadline?: Date;
    dependencies?: string[];
  };

  // å…ƒæ•°æ®
  metadata: {
    timestamp: Date;
    scene_context: string;
    requires_response: boolean;
  };
}
```

**åè°ƒå™¨èŒè´£**
- è·¯ç”±AIé—´æ¶ˆæ¯
- ç®¡ç†ä»»åŠ¡ä¾èµ–
- è§£å†³èµ„æºå†²çª
- ç›‘æ§åä½œçŠ¶æ€

### 5.2 ä»»åŠ¡åˆ†é…

**åˆ†é…ç­–ç•¥**

| ç­–ç•¥ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| æŠ€èƒ½åŒ¹é… | æ ¹æ®ä»»åŠ¡éœ€æ±‚å’ŒAIæŠ€èƒ½åŒ¹é… | é€šç”¨ |
| è´Ÿè½½å‡è¡¡ | è€ƒè™‘AIå½“å‰ä»»åŠ¡é‡ | é«˜å¹¶å‘ |
| è½®è¯¢åˆ†é… | è½®æµåˆ†é…ç»™å¯ç”¨AI | ç®€å•ä»»åŠ¡ |
| ä¸»åŠ¨è®¤é¢† | AIä¸»åŠ¨é€‰æ‹©ä»»åŠ¡ | æ•æ·å¼€å‘ |

**ä»»åŠ¡åˆ†é…æµç¨‹**
```
ä»»åŠ¡åˆ›å»º
    â†“
è§£æä»»åŠ¡éœ€æ±‚
    â†“
åŒ¹é…AIæŠ€èƒ½
    â†“
æ£€æŸ¥AIå¯ç”¨æ€§
    â†“
åˆ†é…ä»»åŠ¡
    â†“
é€šçŸ¥ç›¸å…³AI
    â†“
ç›‘æ§æ‰§è¡Œ
```

**ä»»åŠ¡æ•°æ®ç»“æ„**
```typescript
interface AITask {
  id: string;
  title: string;
  description: string;
  type: 'analysis' | 'writing' | 'coding' | 'review' | 'research';

  // åˆ†é…ä¿¡æ¯
  assigned_to: string;      // AI Agent ID
  assigned_by: string;      // åˆ†é…è€…ï¼ˆç”¨æˆ·æˆ–å…¶ä»–AIï¼‰

  // ä»»åŠ¡è¦æ±‚
  requirements: {
    skills: string[];
    estimated_time: number;
    priority: 'low' | 'medium' | 'high';
    deadline?: Date;
  };

  // æ‰§è¡ŒçŠ¶æ€
  status: 'pending' | 'in_progress' | 'completed' | 'failed';
  progress: number;         // 0-100

  // ç»“æœ
  result?: {
    content: string;
    attachments: Attachment[];
    completed_at: Date;
  };

  // åä½œä¿¡æ¯
  collaborators: string[];  // åä½œAIåˆ—è¡¨
  dependencies: string[];   // ä¾èµ–ä»»åŠ¡ID
}
```

### 5.3 ç»“æœæ±‡æ€»

**æ±‡æ€»æ¨¡å¼**

| æ¨¡å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| é¡ºåºæ±‡æ€» | æŒ‰ä»»åŠ¡å®Œæˆé¡ºåºæ±‡æ€» | ä¼šè®®çºªè¦æ•´ç† |
| åˆ†ç±»æ±‡æ€» | æŒ‰ä»»åŠ¡ç±»å‹åˆ†ç±»æ±‡æ€» | é¡¹ç›®è¿›åº¦æŠ¥å‘Š |
| æ™ºèƒ½åˆå¹¶ | AIè‡ªåŠ¨å»é‡å’Œæ•´åˆ | å¤šAIè°ƒç ”ç»“æœ |
| æŠ•ç¥¨å†³ç­– | å¤šAIæŠ•ç¥¨å¾—å‡ºå…±è¯† | æ–¹æ¡ˆé€‰æ‹© |

**æ±‡æ€»æµç¨‹**
```typescript
interface ResultAggregation {
  // è§¦å‘æ¡ä»¶
  trigger: 'manual' | 'scheduled' | 'task_complete';

  // æ±‡æ€»èŒƒå›´
  scope: {
    task_ids: string[];
    time_range: [Date, Date];
    ai_agents: string[];
  };

  // æ±‡æ€»ç­–ç•¥
  strategy: {
    type: 'sequential' | 'categorized' | 'intelligent' | 'voting';
    merge_duplicates: boolean;
    highlight_conflicts: boolean;
    summary_length: 'brief' | 'detailed' | 'comprehensive';
  };

  // è¾“å‡ºæ ¼å¼
  output: {
    format: 'markdown' | 'structured' | 'report';
    sections: string[];
    include_metadata: boolean;
  };
}
```

**æ±‡æ€»ç¤ºä¾‹ï¼šé¡¹ç›®æ—¥æŠ¥**
```markdown
# é¡¹ç›®æ—¥æŠ¥ - 2026-02-23

## ä»Šæ—¥å®Œæˆä»»åŠ¡
| ä»»åŠ¡ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|--------|------|
| APIè®¾è®¡æ–‡æ¡£ | æ–‡æ¡£åŠ©æ‰‹ | å·²å®Œæˆ |
| æ•°æ®åº“ä¼˜åŒ– | æŠ€æœ¯é¡¾é—® | å·²å®Œæˆ |
| è¿›åº¦æ£€æŸ¥ | é¡¹ç›®åŠ©æ‰‹ | å·²å®Œæˆ |

## è¿›è¡Œä¸­çš„ä»»åŠ¡
| ä»»åŠ¡ | è´Ÿè´£äºº | è¿›åº¦ |
|------|--------|------|
| å‰ç«¯é¡µé¢å¼€å‘ | æŠ€æœ¯é¡¾é—® | 60% |

## æ˜æ—¥è®¡åˆ’
- å®Œæˆå‰ç«¯é¡µé¢å¼€å‘
- å¼€å§‹æ¥å£è”è°ƒ

## é£é™©æç¤º
- å‰ç«¯è¿›åº¦ç•¥æœ‰å»¶è¿Ÿï¼Œå»ºè®®å¢åŠ èµ„æº

---
æ±‡æ€»: é¡¹ç›®åŠ©æ‰‹ ğŸ¤–
æ—¶é—´: 2026-02-23 18:00
```

---

## 6. åœºæ™¯ç‰¹å®šåŠŸèƒ½

### 6.1 é¡¹ç›®åœºæ™¯åŠŸèƒ½

#### 6.1.1 çœ‹æ¿ (Kanban)

**åŠŸèƒ½æ¦‚è¿°**
é¡¹ç›®åœºæ™¯æä¾›å¯è§†åŒ–çœ‹æ¿ï¼Œæ”¯æŒä»»åŠ¡æ‹–æ‹½ç®¡ç†ï¼ŒAIè‡ªåŠ¨åŒæ­¥è¿›åº¦ã€‚

**çœ‹æ¿ç»“æ„**
```typescript
interface KanbanBoard {
  id: string;
  name: string;
  columns: KanbanColumn[];

  // AIè‡ªåŠ¨åŒ–
  auto_sync: boolean;       // AIè‡ªåŠ¨åŒæ­¥ä»»åŠ¡çŠ¶æ€
  ai_suggestions: boolean;  // AIä¼˜åŒ–å»ºè®®
}

interface KanbanColumn {
  id: string;
  name: string;             // å¾…åŠ/è¿›è¡Œä¸­/å·²å®Œæˆ
  order: number;
  tasks: KanbanTask[];

  // é™åˆ¶
  wip_limit?: number;       // åœ¨åˆ¶å“é™åˆ¶
}

interface KanbanTask {
  id: string;
  title: string;
  description: string;
  assignee: string;         // ç”¨æˆ·æˆ–AI
  priority: 'low' | 'medium' | 'high';
  tags: string[];
  due_date?: Date;

  // AIç›¸å…³
  ai_assisted: boolean;     // æ˜¯å¦æœ‰AIå‚ä¸
  ai_contribution: string;  // AIè´¡çŒ®å†…å®¹
}
```

**AIçœ‹æ¿åŠ©æ‰‹åŠŸèƒ½**
- è‡ªåŠ¨åˆ›å»ºä»»åŠ¡å¡ç‰‡
- è¿›åº¦çŠ¶æ€åŒæ­¥
- é˜»å¡ä»»åŠ¡æé†’
- å·¥ä½œé‡å‡è¡¡å»ºè®®

#### 6.1.2 ä»»åŠ¡ç®¡ç†

**ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ**
```
åˆ›å»º -> åˆ†é… -> æ‰§è¡Œ -> å®¡æ ¸ -> å®Œæˆ
        â†“
    çŠ¶æ€å˜æ›´é€šçŸ¥
        â†“
    AIè‡ªåŠ¨è·Ÿè¸ª
```

**AIä»»åŠ¡åˆ†é…ç¤ºä¾‹**
```yaml
task_assignment:
  task: "ç¼–å†™APIæ–‡æ¡£"
  requirements:
    skills: ["technical_writing", "api_design"]
    estimated_time: "2h"

  # AIåè°ƒå™¨åˆ†æ
  analysis:
    candidate_ais:
      - agent_id: "doc_assistant_01"
        match_score: 0.95
        current_load: "30%"
        availability: "immediate"

      - agent_id: "tech_lead_02"
        match_score: 0.80
        current_load: "70%"
        availability: "2h later"

  # åˆ†é…å†³ç­–
  decision:
    assigned_to: "doc_assistant_01"
    reason: "æŠ€èƒ½åŒ¹é…åº¦é«˜ä¸”å½“å‰è´Ÿè½½ä½"
```

### 6.2 é—²èŠåœºæ™¯åŠŸèƒ½

#### 6.2.1 è½»æ¾æ°›å›´è¥é€ 

**æ°›å›´é…ç½®**
```typescript
interface CasualAtmosphere {
  // ä¸»é¢˜
  theme: {
    background: string;       // èƒŒæ™¯å›¾/è‰²
    bubble_style: 'rounded' | 'modern' | 'playful';
    font_style: string;
  };

  // äº’åŠ¨å…ƒç´ 
  interactions: {
    stickers_enabled: boolean;
    mini_games: string[];     // å¯é€‰å°æ¸¸æˆ
    topic_suggestions: boolean;
    mood_detection: boolean;
  };

  // AIè¡Œä¸º
  ai_behavior: {
    humor_level: 'mild' | 'moderate' | 'high';
    emoji_frequency: 'low' | 'medium' | 'high';
    initiative: 'reactive' | 'balanced' | 'proactive';
  };
}
```

**æ°›å›´åŠŸèƒ½**
- è¡¨æƒ…åŒ…æ¨èå’Œå‘é€
- å¤©æ°”/æ–°é—»è¯é¢˜å¼•å…¥
- ç¾¤èŠå°æ¸¸æˆï¼ˆçŒœè°œã€æ¥é¾™ç­‰ï¼‰
- æƒ…ç»ªè¯†åˆ«å’Œå®‰æ…°

### 6.3 ä¼šè®®åœºæ™¯åŠŸèƒ½

#### 6.3.1 æ™ºèƒ½çºªè¦ç”Ÿæˆ

**çºªè¦ç”Ÿæˆæµç¨‹**
```
ä¼šè®®å¼€å§‹
    â†“
AIå®æ—¶ç›‘å¬
    â†“
å…³é”®ä¿¡æ¯æå–
    â†“
ç»“æ„åŒ–æ•´ç†
    â†“
ä¼šè®®ç»“æŸ
    â†“
ç”Ÿæˆçºªè¦æ–‡æ¡£
    â†“
è¡ŒåŠ¨é¡¹åˆ†é…
```

**çºªè¦ç»“æ„**
```typescript
interface MeetingMinutes {
  id: string;
  meeting_info: {
    title: string;
    start_time: Date;
    end_time: Date;
    participants: string[];
    ai_notetaker: string;
  };

  // è®®ç¨‹
  agenda: {
    item: string;
    duration: number;
    discussed: boolean;
  }[];

  // è®¨è®ºè¦ç‚¹
  key_points: {
    topic: string;
    summary: string;
    decisions: string[];
    owner?: string;
  }[];

  // è¡ŒåŠ¨é¡¹
  action_items: {
    task: string;
    assignee: string;
    due_date: Date;
    priority: string;
  }[];

  // å…¨æ–‡è®°å½•
  full_transcript?: string;
}
```

**çºªè¦ç¤ºä¾‹**
```markdown
# é¡¹ç›®å‘¨ä¼šçºªè¦

**æ—¶é—´**: 2026-02-23 14:00-15:00
**åœ°ç‚¹**: çº¿ä¸Šä¼šè®®å®¤
**è®°å½•**: AIçºªè¦åŠ©æ‰‹ ğŸ¤–

## å‚ä¼šäººå‘˜
- å¼ ä¸‰ï¼ˆäº§å“ç»ç†ï¼‰
- æå››ï¼ˆæŠ€æœ¯è´Ÿè´£äººï¼‰
- ç‹äº”ï¼ˆè®¾è®¡å¸ˆï¼‰

## è®®ç¨‹å›é¡¾
1. âœ… ä¸Šå‘¨è¿›åº¦å›é¡¾
2. âœ… æœ¬å‘¨è®¡åˆ’è®¨è®º
3. âœ… æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡

## å…³é”®å†³ç­–
1. **é‡‡ç”¨å¾®æœåŠ¡æ¶æ„** - æå››æè®®ï¼Œå…¨å‘˜åŒæ„
2. **ä¸Šçº¿æ—¶é—´å»¶åä¸€å‘¨** - å› æµ‹è¯•èµ„æºä¸è¶³

## è¡ŒåŠ¨é¡¹
| ä»»åŠ¡ | è´Ÿè´£äºº | æˆªæ­¢æ—¶é—´ |
|------|--------|----------|
| å®ŒæˆAPIè®¾è®¡ | æå›› | 2026-02-25 |
| æä¾›è®¾è®¡ç¨¿ | ç‹äº” | 2026-02-24 |
| æ›´æ–°é¡¹ç›®è®¡åˆ’ | å¼ ä¸‰ | 2026-02-23 |

---
*ç”±AIçºªè¦åŠ©æ‰‹è‡ªåŠ¨ç”Ÿæˆ*
```

### 6.4 å­¦ä¹ åœºæ™¯åŠŸèƒ½

#### 6.4.1 å­¦ä¹ è¿›åº¦è·Ÿè¸ª

**è¿›åº¦å¯è§†åŒ–**
```typescript
interface LearningProgress {
  user_id: string;
  course_id: string;

  // æ•´ä½“è¿›åº¦
  overall_progress: number;   // 0-100

  // ç« èŠ‚è¿›åº¦
  chapters: {
    chapter_id: string;
    status: 'locked' | 'available' | 'in_progress' | 'completed';
    progress: number;
    time_spent: number;       // åˆ†é’Ÿ
    quiz_score?: number;
  }[];

  // AIè¯„ä¼°
  ai_assessment: {
    strengths: string[];
    weaknesses: string[];
    suggestions: string[];
    estimated_completion: Date;
  };

  // æˆå°±
  achievements: string[];
}
```

**AIå¯¼å¸ˆåŠŸèƒ½**
- ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„æ¨è
- çŸ¥è¯†ç‚¹è–„å¼±é¡¹è¯†åˆ«
- å­¦ä¹ æé†’å’Œç£ä¿ƒ
- äº’åŠ¨é—®ç­”å’Œç­”ç–‘

---

## 7. APIæ¥å£è®¾è®¡

### 7.1 åœºæ™¯ç®¡ç†API

```http
# åˆ›å»ºèŠå¤©å®¤å¹¶æŒ‡å®šåœºæ™¯
POST /api/chat/rooms
{
  "name": "AIæ´»åŠ¨ç§€å¼€å‘ç»„",
  "scene_type": "project",
  "template_id": "agile_dev",
  "config": {
    "max_members": 10,
    "features": {
      "kanban": true,
      "task_management": true
    }
  }
}

# åˆ‡æ¢åœºæ™¯
POST /api/chat/rooms/{room_id}/switch-scene
{
  "scene_type": "meeting",
  "preserve_data": true
}

# è·å–åœºæ™¯é…ç½®
GET /api/chat/rooms/{room_id}/scene-config

# æ›´æ–°åœºæ™¯é…ç½®
PUT /api/chat/rooms/{room_id}/scene-config
```

### 7.2 AIåˆ†èº«ç®¡ç†API

```http
# è·å–å¯é‚€è¯·çš„AIåˆ†èº«åˆ—è¡¨
GET /api/chat/rooms/{room_id}/available-agents

# é‚€è¯·AIåˆ†èº«
POST /api/chat/rooms/{room_id}/agents
{
  "agent_id": "agent_123",
  "role": "project_manager",
  "permissions": ["read", "write", "task_manage"]
}

# ç§»é™¤AIåˆ†èº«
DELETE /api/chat/rooms/{room_id}/agents/{agent_id}

# æ›´æ–°AIé…ç½®
PUT /api/chat/rooms/{room_id}/agents/{agent_id}
{
  "role": "tech_lead",
  "proactive_level": 80
}
```

### 7.3 åä½œä»»åŠ¡API

```http
# åˆ›å»ºAIä»»åŠ¡
POST /api/chat/rooms/{room_id}/ai-tasks
{
  "title": "åˆ†æç”¨æˆ·åé¦ˆ",
  "type": "analysis",
  "assigned_to": "agent_123",
  "requirements": {
    "skills": ["data_analysis"],
    "deadline": "2026-02-24T18:00:00Z"
  }
}

# è·å–ä»»åŠ¡åˆ—è¡¨
GET /api/chat/rooms/{room_id}/ai-tasks?status=in_progress

# ä»»åŠ¡ç»“æœæ±‡æ€»
POST /api/chat/rooms/{room_id}/ai-tasks/aggregate
{
  "task_ids": ["task_1", "task_2"],
  "strategy": "intelligent"
}
```

### 7.4 åœºæ™¯åŠŸèƒ½API

```http
# çœ‹æ¿æ“ä½œ
GET /api/chat/rooms/{room_id}/kanban
POST /api/chat/rooms/{room_id}/kanban/columns
POST /api/chat/rooms/{room_id}/kanban/tasks
PUT /api/chat/rooms/{room_id}/kanban/tasks/{task_id}/move

# ä¼šè®®çºªè¦
GET /api/chat/rooms/{room_id}/meetings/{meeting_id}/minutes
POST /api/chat/rooms/{room_id}/meetings/{meeting_id}/minutes/generate

# å­¦ä¹ è¿›åº¦
GET /api/chat/rooms/{room_id}/learning/progress
GET /api/chat/rooms/{room_id}/learning/assessment
```

---

## 8. æ•°æ®åº“è®¾è®¡

### 8.1 æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- èŠå¤©å®¤è¡¨
CREATE TABLE chat_rooms (
    id VARCHAR(36) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    scene_type ENUM('casual', 'project', 'meeting', 'learning') NOT NULL,
    template_id VARCHAR(36),
    config JSON,
    created_by VARCHAR(36) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_scene_type (scene_type),
    INDEX idx_created_by (created_by)
);

-- AIåˆ†èº«å®ä¾‹è¡¨ï¼ˆèŠå¤©å®¤ä¸­çš„AIï¼‰
CREATE TABLE room_ai_agents (
    id VARCHAR(36) PRIMARY KEY,
    room_id VARCHAR(36) NOT NULL,
    agent_id VARCHAR(36) NOT NULL,
    agent_type ENUM('user_created', 'system', 'marketplace') NOT NULL,
    name VARCHAR(100) NOT NULL,
    avatar VARCHAR(500),
    role VARCHAR(50),
    skills JSON,
    personality_config JSON,
    proactive_level INT DEFAULT 50,
    status ENUM('active', 'paused', 'removed') DEFAULT 'active',
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES chat_rooms(id) ON DELETE CASCADE,
    INDEX idx_room_agent (room_id, agent_id),
    INDEX idx_status (status)
);

-- åœºæ™¯é…ç½®è¡¨
CREATE TABLE scene_configs (
    id VARCHAR(36) PRIMARY KEY,
    scene_type ENUM('casual', 'project', 'meeting', 'learning') NOT NULL,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    default_config JSON NOT NULL,
    default_agents JSON,
    features JSON,
    is_template BOOLEAN DEFAULT FALSE,
    created_by VARCHAR(36),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- AIä»»åŠ¡è¡¨
CREATE TABLE ai_tasks (
    id VARCHAR(36) PRIMARY KEY,
    room_id VARCHAR(36) NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    task_type ENUM('analysis', 'writing', 'coding', 'review', 'research', 'coordination') NOT NULL,
    assigned_to VARCHAR(36) NOT NULL,
    assigned_by VARCHAR(36) NOT NULL,
    requirements JSON,
    status ENUM('pending', 'in_progress', 'completed', 'failed') DEFAULT 'pending',
    progress INT DEFAULT 0,
    result JSON,
    collaborators JSON,
    dependencies JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES chat_rooms(id) ON DELETE CASCADE,
    INDEX idx_room_status (room_id, status),
    INDEX idx_assigned_to (assigned_to)
);

-- çœ‹æ¿è¡¨
CREATE TABLE kanban_boards (
    id VARCHAR(36) PRIMARY KEY,
    room_id VARCHAR(36) NOT NULL UNIQUE,
    name VARCHAR(100) DEFAULT 'é¡¹ç›®çœ‹æ¿',
    config JSON,
    auto_sync BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES chat_rooms(id) ON DELETE CASCADE
);

-- çœ‹æ¿åˆ—
CREATE TABLE kanban_columns (
    id VARCHAR(36) PRIMARY KEY,
    board_id VARCHAR(36) NOT NULL,
    name VARCHAR(100) NOT NULL,
    column_order INT NOT NULL,
    wip_limit INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (board_id) REFERENCES kanban_boards(id) ON DELETE CASCADE,
    INDEX idx_board_order (board_id, column_order)
);

-- çœ‹æ¿ä»»åŠ¡
CREATE TABLE kanban_tasks (
    id VARCHAR(36) PRIMARY KEY,
    column_id VARCHAR(36) NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    assignee_type ENUM('user', 'ai') NOT NULL,
    assignee_id VARCHAR(36) NOT NULL,
    priority ENUM('low', 'medium', 'high') DEFAULT 'medium',
    tags JSON,
    due_date TIMESTAMP,
    ai_assisted BOOLEAN DEFAULT FALSE,
    ai_contribution TEXT,
    task_order INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (column_id) REFERENCES kanban_columns(id) ON DELETE CASCADE,
    INDEX idx_column_order (column_id, task_order)
);

-- ä¼šè®®çºªè¦è¡¨
CREATE TABLE meeting_minutes (
    id VARCHAR(36) PRIMARY KEY,
    room_id VARCHAR(36) NOT NULL,
    meeting_title VARCHAR(255) NOT NULL,
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP,
    participants JSON,
    ai_notetaker VARCHAR(36),
    agenda JSON,
    key_points JSON,
    action_items JSON,
    full_transcript TEXT,
    status ENUM('recording', 'completed') DEFAULT 'recording',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES chat_rooms(id) ON DELETE CASCADE,
    INDEX idx_room_time (room_id, start_time)
);

-- å­¦ä¹ è¿›åº¦è¡¨
CREATE TABLE learning_progress (
    id VARCHAR(36) PRIMARY KEY,
    room_id VARCHAR(36) NOT NULL,
    user_id VARCHAR(36) NOT NULL,
    course_id VARCHAR(36) NOT NULL,
    overall_progress INT DEFAULT 0,
    chapters JSON,
    ai_assessment JSON,
    achievements JSON,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES chat_rooms(id) ON DELETE CASCADE,
    UNIQUE KEY uk_room_user_course (room_id, user_id, course_id)
);

-- AIé—´é€šä¿¡æ—¥å¿—è¡¨
CREATE TABLE ai_communications (
    id VARCHAR(36) PRIMARY KEY,
    room_id VARCHAR(36) NOT NULL,
    msg_type ENUM('task_assign', 'status_update', 'result_share', 'coordination') NOT NULL,
    from_agent VARCHAR(36) NOT NULL,
    to_agent VARCHAR(36),
    payload JSON NOT NULL,
    metadata JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES chat_rooms(id) ON DELETE CASCADE,
    INDEX idx_room_time (room_id, created_at)
);
```

### 8.2 ç´¢å¼•è®¾è®¡

```sql
-- å¸¸ç”¨æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_rooms_scene_created ON chat_rooms(scene_type, created_at);
CREATE INDEX idx_agents_room_status ON room_ai_agents(room_id, status);
CREATE INDEX idx_tasks_room_status_type ON ai_tasks(room_id, status, task_type);
CREATE INDEX idx_minutes_room_status ON meeting_minutes(room_id, status);

-- å…¨æ–‡æœç´¢ç´¢å¼•ï¼ˆMySQL 5.6+ï¼‰
ALTER TABLE ai_tasks ADD FULLTEXT INDEX ft_task_content (title, description);
ALTER TABLE meeting_minutes ADD FULLTEXT INDEX ft_transcript (full_transcript);
```

---

## 9. å®ç°è·¯çº¿å›¾

### 9.1 é˜¶æ®µåˆ’åˆ†

```
Phase 1: åŸºç¡€æ¡†æ¶ (4å‘¨)
â”œâ”€â”€ åœºæ™¯ç±»å‹å®šä¹‰å’Œå­˜å‚¨
â”œâ”€â”€ åŸºç¡€åœºæ™¯åˆ‡æ¢åŠŸèƒ½
â”œâ”€â”€ AIåˆ†èº«é‚€è¯·åŸºç¡€æµç¨‹
â””â”€â”€ èº«ä»½æ ‡è¯†UI

Phase 2: AIåä½œ (6å‘¨)
â”œâ”€â”€ AIé—´é€šä¿¡åè®®
â”œâ”€â”€ ä»»åŠ¡åˆ†é…ç³»ç»Ÿ
â”œâ”€â”€ ç»“æœæ±‡æ€»åŠŸèƒ½
â””â”€â”€ é¡¹ç›®åœºæ™¯çœ‹æ¿

Phase 3: åœºæ™¯åŠŸèƒ½ (4å‘¨)
â”œâ”€â”€ ä¼šè®®çºªè¦ç”Ÿæˆ
â”œâ”€â”€ å­¦ä¹ è¿›åº¦è·Ÿè¸ª
â”œâ”€â”€ é—²èŠæ°›å›´åŠŸèƒ½
â””â”€â”€ åœºæ™¯æ¨¡æ¿å¸‚åœº

Phase 4: ä¼˜åŒ–è¿­ä»£ (2å‘¨)
â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ ç”¨æˆ·ä½“éªŒæ”¹è¿›
â”œâ”€â”€ æ–‡æ¡£å®Œå–„
â””â”€â”€ Bugä¿®å¤
```

### 9.2 ä¼˜å…ˆçº§çŸ©é˜µ

| åŠŸèƒ½ | é‡è¦æ€§ | ç´§æ€¥æ€§ | ä¼˜å…ˆçº§ |
|------|--------|--------|--------|
| åœºæ™¯ç±»å‹å®šä¹‰ | é«˜ | é«˜ | P0 |
| AIèº«ä»½æ ‡è¯† | é«˜ | é«˜ | P0 |
| AIé‚€è¯·æµç¨‹ | é«˜ | é«˜ | P0 |
| é¡¹ç›®çœ‹æ¿ | é«˜ | ä¸­ | P1 |
| ä»»åŠ¡åˆ†é… | é«˜ | ä¸­ | P1 |
| ä¼šè®®çºªè¦ | ä¸­ | ä¸­ | P2 |
| å­¦ä¹ è¿›åº¦ | ä¸­ | ä½ | P2 |
| é—²èŠæ°›å›´ | ä½ | ä½ | P3 |

### 9.3 æŠ€æœ¯é€‰å‹

| ç»„ä»¶ | æŠ€æœ¯æ–¹æ¡ˆ | è¯´æ˜ |
|------|----------|------|
| æ¶ˆæ¯é˜Ÿåˆ— | Redis/RabbitMQ | AIé—´é€šä¿¡ |
| å®æ—¶é€šä¿¡ | WebSocket | åœºæ™¯çŠ¶æ€åŒæ­¥ |
| ä»»åŠ¡è°ƒåº¦ | Celery | AIä»»åŠ¡æ‰§è¡Œ |
| æ–‡æ¡£å­˜å‚¨ | MongoDB | ä¼šè®®çºªè¦ã€å­¦ä¹ èµ„æ–™ |
| ç¼“å­˜ | Redis | åœºæ™¯é…ç½®ç¼“å­˜ |

---

## é™„å½•

### A. æœ¯è¯­è¡¨

| æœ¯è¯­ | è‹±æ–‡ | è¯´æ˜ |
|------|------|------|
| èŠå¤©åœºæ™¯ | Chat Scene | å®šä¹‰èŠå¤©å®¤è¡Œä¸ºæ¨¡å¼çš„æ¦‚å¿µ |
| AIåˆ†èº« | AI Agent | ç”¨æˆ·åˆ›å»ºçš„AIä»£ç†å®ä¾‹ |
| åä½œæ¨¡å¼ | Collaboration Mode | å¤šAIä¹‹é—´çš„åä½œç­–ç•¥ |
| åœºæ™¯æ¨¡æ¿ | Scene Template | é¢„å®šä¹‰çš„åœºæ™¯é…ç½®æ¨¡æ¿ |
| çœ‹æ¿ | Kanban | å¯è§†åŒ–ä»»åŠ¡ç®¡ç†å·¥å…· |

### B. å‚è€ƒæ–‡æ¡£

- [WebSocketé€šä¿¡åè®®è®¾è®¡](./websocket-protocol.md)
- [AIåˆ†èº«ç³»ç»Ÿè®¾è®¡](./ai-agent-system.md)
- [èŠå¤©ç³»ç»Ÿæ•°æ®åº“è®¾è®¡](./chat-database-design.md)

### C. å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| 1.0 | 2026-02-23 | åˆå§‹ç‰ˆæœ¬ | æŠ€æœ¯å›¢é˜Ÿ |

---

**æ–‡æ¡£ç»“æŸ**
